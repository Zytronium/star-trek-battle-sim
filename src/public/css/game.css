/* Layout base & theme variables */
:root{
    --cyan: rgba(0,212,255,0.95);
    --cyan-dim: rgba(0,212,255,0.35);
    --accent: #ff6b35;
    --bg-glass: rgba(0,0,0,0.55);
    --bg-glass-strong: rgba(0,0,0,0.75);
    --panel-glow: 0 0 26px rgba(0,212,255,0.12);
    --glow-speed: 3.2s;
    --pill-bg: rgba(255,255,255,0.04);
}

/* Box sizing */
* { box-sizing: border-box; }

/* Body */
html,body { height:100%; }
body{
    margin:0;
    font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
    background: #000;
    color: #fff;
    overflow: hidden;
}

/* Background video — restored (HTML already has video element) */
.background-video {
    position: fixed;
    inset: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    z-index: -2;
    filter: brightness(0.5) saturate(1.15);
}

/* Side nav */
nav.side-nav{
    position: fixed;
    left: 0;
    top: 0;
    bottom: 0;
    width: 88px;
    padding: 12px 8px;
    background: linear-gradient(180deg, rgba(0,0,0,0.85), rgba(0,0,0,0.75));
    border-right: 2px solid var(--cyan-dim);
    box-shadow: 2px 0 30px rgba(0,212,255,0.06);
    z-index: 1001;
    display:flex;
    align-items:flex-start;
    justify-content:center;
}
nav.side-nav .nav-links{
    display:flex; flex-direction:column; gap:12px; align-items:center; width:100%;
}
nav.side-nav .nav-link{
    display:flex; flex-direction:column; align-items:center; gap:6px;
    width:72px; height:72px; text-decoration:none; color:var(--cyan);
    border-radius:12px; padding:6px; text-align:center;
    background: rgba(0,212,255,0.03);
    border: 1px solid rgba(0,212,255,0.06);
    transition: transform .12s ease, box-shadow .12s ease, background .12s ease;
}
nav.side-nav .nav-link img{ width:36px; height:36px; border-radius:6px; }
nav.side-nav .nav-link:hover{
    transform: translateY(-4px);
    box-shadow: 0 10px 40px rgba(0,212,255,0.08);
    background: linear-gradient(180deg, rgba(0,212,255,0.06), rgba(0,212,255,0.02));
    color: #e0ffff;
}

/* App container */
.container{ margin-left:88px; height:100vh; display:flex; flex-direction:column; }

/* Top bar */
.top-bar{
    display:grid; grid-template-columns:1fr auto 1fr; gap:10px;
    align-items:center; padding:10px 16px;
    background: linear-gradient(180deg, rgba(255,255,255,0.02), var(--bg-glass-strong));
    border-bottom: 1px solid rgba(0,212,255,0.04);
    z-index: 50;
}

/* Spectate button improved */
.spectate-btn{
    padding:8px 14px;
    border-radius:10px;
    border:1px solid var(--cyan-dim);
    background: linear-gradient(180deg, rgba(0,212,255,0.04), rgba(0,212,255,0.02));
    color: var(--cyan);
    cursor:pointer;
    font-weight:700;
    transition: transform .08s ease, box-shadow .12s ease, background .12s ease;
}
.spectate-btn:hover{
    transform: translateY(-2px);
    box-shadow: 0 8px 26px rgba(0,212,255,0.08);
    background: linear-gradient(180deg, rgba(0,212,255,0.08), rgba(0,212,255,0.03));
}

/* Turn display (ensure visible) */
.top-center { text-align:center; font-weight:700; color:var(--cyan); font-size:0.95rem; }
.top-left { justify-self:start; }
.top-right { justify-self:end; color:var(--cyan); font-weight:700; }

/* Main layout */
.battle-layout{
    display:grid; grid-template-columns:24% 1fr 24%; gap:20px;
    padding:20px 20px 120px; flex:1; overflow:hidden;
}

/* Panels (ship info) */
.ship-panel{
    background: linear-gradient(180deg, rgba(0,0,0,0.2), rgba(0,0,0,0.35));
    border-radius:12px; padding:14px; overflow-y:auto;
    border: 1px solid rgba(255,255,255,0.03);
    box-shadow: 0 10px 40px rgba(0,0,0,0.6), var(--panel-glow);
}

/* Ship header (title shows ship name + pilot via JS) */
.ship-panel h2{
    margin:0 0 12px 0; font-weight:700; letter-spacing:0.3px; color:var(--cyan);
    display:flex; align-items:center; gap:10px;
}

/* Ship display (image area) */
.ship-display{ display:flex; flex-direction:column; align-items:center; gap:10px; }
.ship-image-wrap{
    width:100%; height:220px; border-radius:14px;
    overflow:hidden; background: rgba(0,0,0,0.7); display:grid; place-items:center;
    border: 1px solid rgba(255,255,255,0.02);
    align-content: center;
}
.ship-image-wrap img{
    width:100%; height:100%; object-fit: contain; object-position:center center;
    display:block;
}

/* Ship stats table: label (left, blue) + value (right, white) */
.ship-stats .stat-line{
    display:flex; justify-content:space-between; padding:8px 6px; align-items:center;
    border-bottom: 1px dashed rgba(255,255,255,0.02);
    text-align: right;
}
.ship-stats .label { color: var(--cyan); font-weight:700; }
.ship-stats .stat-line span:last-child { color: #fff; font-weight:600; }

/* Bars (taller) */
.bars{ margin-top:10px; display:grid; gap:12px; }
.bar-head{ display:flex; justify-content:space-between; font-size:0.95rem; margin-bottom:6px; color:rgba(255,255,255,0.9);}
.bar-track{
    position:relative; height:18px; border-radius:12px; overflow:hidden;
    background: rgba(255,255,255,0.02); border:1px solid rgba(255,255,255,0.03);
}
.bar-fill{
    height:100%; width:0; transition: width 360ms cubic-bezier(.2,.9,.1,.98);
    background: linear-gradient(90deg, rgba(0,212,255,0.95), rgba(0,212,255,0.45));
    box-shadow: 0 0 18px rgba(0,212,255,0.06) inset;
}
.bar-track.hull .bar-fill { background: linear-gradient(90deg, rgba(255,0,0,0.95), rgba(255,80,80,0.6)); box-shadow: 0 0 18px rgba(255,0,0,0.06) inset; }
.bar-track.armor .bar-fill { background: linear-gradient(90deg, rgba(255,183,38,0.95), rgba(255,201,102,0.6)); }

/* Center arena */
.center-arena {
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 12px;
    padding: 22px;
    box-shadow: 0 8px 40px rgba(0,0,0,0.6);
    background: linear-gradient(rgba(0, 0, 0, 0.125), rgba(0, 0, 0, 0.13))
}


/* Display grid inside center */
.ship-display-box{ display:grid; grid-template-columns:1fr auto 1fr; align-items:center; gap:32px; width:100%; }

/* Attack bar — NO outline/border per your request */
.attack-bar{
    position:relative; height:66px; width:100%; max-width:920px;
    background: rgba(0,0,0,0.28); border-radius:10px;
    display:flex; align-items:center; justify-content:space-between; padding:0 36px;
    box-shadow:none;
}

/* Player dots (centered vertically) */
.player-dot{
    width:24px; height:24px; border-radius:50%; display:inline-block; align-self:center;
    transition: transform .18s ease, box-shadow .12s ease;
    background: linear-gradient(180deg, rgba(255,255,255,0.04), rgba(0,0,0,0.2));
    box-shadow: 0 6px 18px rgba(0,0,0,0.6);
}
.player-dot.left{ background: linear-gradient(180deg,#00d4ff,#009ecf); box-shadow: 0 0 30px rgba(0,212,255,0.8); }
.player-dot.right{ background: linear-gradient(180deg,#ff5a5a,#ff2f2f); box-shadow: 0 0 30px rgba(255,59,59,0.8); }

/* Bounce & under-attack (kept) */
.player-dot.left.hit{ animation: bounceLeft 0.6s ease-out, shake 0.3s ease-out; }
.player-dot.right.hit{ animation: bounceRight 0.6s ease-out, shake 0.3s ease-out; }
.player-dot.left.under-attack, .player-dot.right.under-attack{ animation: shake 0.2s ease-in-out infinite; }

/* Bottom weapons bar */
.bottom-bar{
    position:fixed; left:88px; right:0; bottom:0; padding:12px 18px;
    display:flex; flex-wrap:wrap; gap:12px; justify-content:center;
    background: linear-gradient(180deg, rgba(0,0,0,0.85), rgba(0,0,0,0.92));
    border-top:1px solid rgba(0,212,255,0.04); z-index:100;
}

/* Weapon button visuals (improved readability) */
.weapon-button{
    min-width:150px; max-width:320px; width:calc(28% - 8px);
    padding:12px 14px; border-radius:12px; text-align:left;
    display:flex; flex-direction:column; gap:8px; cursor:pointer;
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border:1px solid rgba(255,255,255,0.04);
    box-shadow: 0 8px 20px rgba(0,0,0,0.45), 0 0 18px rgba(0,212,255,0.02);
    transition: transform .08s ease, box-shadow .12s ease, background .12s ease;
    font-weight:700;
}
.weapon-button:hover{
    transform: translateY(-6px);
    box-shadow: 0 12px 36px rgba(0,0,0,0.55), 0 0 36px rgba(0,212,255,0.06);
    background: linear-gradient(180deg, rgba(0,212,255,0.04), rgba(0,212,255,0.01));
}
.weapon-button:disabled{
    opacity:0.55; cursor:not-allowed; transform:none; box-shadow:none;
}

/* Weapon name & meta */
.weapon-button > div:first-child{ font-size:1rem; color:#fff; }
.weapon-meta{ display:flex; justify-content:space-between; gap:8px; font-size:0.88rem; color:rgba(255,255,255,0.9); align-items:center; }
.weapon-button .pill{
    background: var(--pill-bg); padding:4px 8px; border-radius:999px; font-size:0.82rem; border:1px solid rgba(255,255,255,0.03);
}

/* tooltip */
.weapon-button[data-tooltip]:hover::after{
    content: attr(data-tooltip);
    position:absolute; left:50%; transform:translateX(-50%); bottom: calc(100% + 12px);
    background: rgba(0,0,0,0.9); color:#fff; padding:10px; border-radius:8px;
    min-width:220px; max-width:360px; font-size:0.88rem; text-align:left; white-space:pre-line;
    box-shadow: 0 10px 30px rgba(0,0,0,0.6);
    z-index:1200;
}

/* Explosion particles (kept) */
.explosion{ position:fixed; width:0; height:0; pointer-events:none; z-index:1200; }
.explosion-particle{ position:absolute; width:4px; height:4px; border-radius:50%; animation: explodeParticle 1.2s ease-out forwards; box-shadow:0 0 12px currentColor; }

/* Keyframes (bounce/shake) */
@keyframes bounceLeft{ 0%{transform:translateX(0) scale(1)} 15%{transform:translateX(-20px) scale(1.3)} 30%{transform:translateX(12px) scale(0.8)} 45%{transform:translateX(-8px) scale(1.1)} 60%{transform:translateX(4px) scale(0.9)} 75%{transform:translateX(-2px) scale(1.05)} 100%{transform:translateX(0) scale(1)} }
@keyframes bounceRight{ 0%{transform:translateX(0) scale(1)} 15%{transform:translateX(20px) scale(1.3)} 30%{transform:translateX(-12px) scale(0.8)} 45%{transform:translateX(8px) scale(1.1)} 60%{transform:translateX(-4px) scale(0.9)} 75%{transform:translateX(2px) scale(1.05)} 100%{transform:translateX(0) scale(1)} }
@keyframes shake{ 0%,100%{transform:translateX(0) translateY(0)} 25%{transform:translateX(-2px) translateY(-1px)} 50%{transform:translateX(2px) translateY(1px)} 75%{transform:translateX(-1px) translateY(2px)} }

/* Subtle pulsing glow used across panels/buttons */
@keyframes pulseGlow{
    0%{ box-shadow:0 6px 18px rgba(0,0,0,0.6), 0 0 10px rgba(0,212,255,0.06) inset; }
    50%{ box-shadow:0 10px 36px rgba(0,0,0,0.7), 0 0 22px rgba(0,212,255,0.10) inset; }
    100%{ box-shadow:0 6px 18px rgba(0,0,0,0.6), 0 0 10px rgba(0,212,255,0.06) inset; }
}

/* utility */
.hidden { display:none !important; }

/* ===================== Outlines & Glows ===================== */
@keyframes outlineGlow {
    0% { box-shadow: 0 0 6px var(--cyan-dim), 0 0 0px var(--cyan); }
    50% { box-shadow: 0 0 12px var(--cyan-dim), 0 0 12px var(--cyan); }
    100% { box-shadow: 0 0 6px var(--cyan-dim), 0 0 0px var(--cyan); }
}

/* Ship panels outline */
.ship-panel {
    position: relative;
    border: 1px solid rgba(255,255,255,0.04);
    animation: outlineGlow var(--glow-speed) ease-in-out infinite alternate;
    backdrop-filter: blur(2px);
}

/* Center arena glow */
.center-arena {
    border: 1px solid rgba(255,255,255,0.05);
    animation: outlineGlow var(--glow-speed) ease-in-out infinite alternate;
    animation-duration: 3.0s;
    animation-delay: 0.2s;
}

/* Top bar glow */
.top-bar {
    border-bottom: 1px solid rgba(0,212,255,0.05);
    animation: outlineGlow var(--glow-speed) ease-in-out infinite alternate;
    animation-duration: 3.1s;
    animation-delay: 0.3s;
}

/* Bottom weapons bar glow */
.bottom-bar {
    border-top: 1px solid rgba(0,212,255,0.05);
    animation: outlineGlow var(--glow-speed) ease-in-out infinite alternate;
    background-image: url(/images/space.png);
    background-repeat: repeat;
    background-size: 50vh;
}

/* Side nav outline glow */
nav.side-nav {
    border-right: 2px solid rgba(0,212,255,0.5);
    animation: outlineGlow var(--glow-speed) ease-in-out infinite alternate;
    animation-duration: 3.4s;
    animation-delay: 0.5s;
    background-image: url(/images/space.png);
    background-repeat: repeat;
    background-size: 50vh;
}

/* ===================== Home Icon Fix ===================== */
nav.side-nav .nav-link img {
    width: auto;
    height: 36px;
    max-width: 100%;
    object-fit: contain;
    border-radius:6px;
}

/* ===================== Weapon Button Restyle ===================== */
.weapon-button {
    background: linear-gradient(180deg, rgba(23, 27, 29, 0.75), rgba(23, 27, 29, 0.85));
    color: var(--cyan);
    font-family: "Inter", "Segoe UI", Arial, sans-serif;
    border: 1px solid var(--cyan-dim);
    box-shadow: 0 0 12px var(--cyan-dim);
    transition: transform .08s ease, box-shadow .12s ease, background .12s ease, color .12s ease;
}

.weapon-button:hover {
    background: linear-gradient(180deg, rgba(0,212,255,0.1), rgba(0,212,255,0.05));
    box-shadow: 0 0 24px var(--cyan);
    color: #fff;
}

/* Weapon text readability */
.weapon-button > div:first-child {
    font-size: 1rem;
    color: var(--cyan);
}

.weapon-meta {
    font-size: 0.88rem;
    color: rgba(0,212,255,0.85);
}

/* Pill styling for clarity */
.weapon-button .pill {
    background: rgba(0,212,255,0.05);
    color: var(--cyan);
    border: 1px solid rgba(0,212,255,0.2);
}

/* ===================== Panel Inner Glow ===================== */
.ship-panel, .center-arena, .bottom-bar, .top-bar {
    box-shadow: inset 0 0 12px rgba(0,212,255,0.08);
}

/* Optional: subtle hover glow on panels */
.ship-panel:hover, .center-arena:hover {
    box-shadow: inset 0 0 24px rgba(0,212,255,0.15), 0 0 16px rgba(0,212,255,0.2);
}

/* Player panel pulses slightly faster */
#player-panel {
    animation-duration: 2.8s;
    animation-delay: 0s;
}

/* CPU panel pulses slightly slower */
#cpu-panel {
    animation-duration: 3.5s;
    animation-delay: 0.4s;
}